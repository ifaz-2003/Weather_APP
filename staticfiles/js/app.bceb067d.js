(function(){var e={5358:function(e,t,a){var s={"./af":2190,"./af.js":2190,"./ar":7218,"./ar-dz":5785,"./ar-dz.js":5785,"./ar-kw":9417,"./ar-kw.js":9417,"./ar-ly":6904,"./ar-ly.js":6904,"./ar-ma":8617,"./ar-ma.js":8617,"./ar-ps":1318,"./ar-ps.js":1318,"./ar-sa":2699,"./ar-sa.js":2699,"./ar-tn":6789,"./ar-tn.js":6789,"./ar.js":7218,"./az":3050,"./az.js":3050,"./be":8316,"./be.js":8316,"./bg":310,"./bg.js":310,"./bm":8884,"./bm.js":8884,"./bn":3469,"./bn-bd":6672,"./bn-bd.js":6672,"./bn.js":3469,"./bo":9118,"./bo.js":9118,"./br":3113,"./br.js":3113,"./bs":3626,"./bs.js":3626,"./ca":921,"./ca.js":921,"./cs":7799,"./cs.js":7799,"./cv":2828,"./cv.js":2828,"./cy":3521,"./cy.js":3521,"./da":6962,"./da.js":6962,"./de":3294,"./de-at":6158,"./de-at.js":6158,"./de-ch":5960,"./de-ch.js":5960,"./de.js":3294,"./dv":7963,"./dv.js":7963,"./el":3432,"./el.js":3432,"./en-au":998,"./en-au.js":998,"./en-ca":5931,"./en-ca.js":5931,"./en-gb":5930,"./en-gb.js":5930,"./en-ie":8081,"./en-ie.js":8081,"./en-il":1594,"./en-il.js":1594,"./en-in":3904,"./en-in.js":3904,"./en-nz":1507,"./en-nz.js":1507,"./en-sg":9409,"./en-sg.js":9409,"./eo":2177,"./eo.js":2177,"./es":4805,"./es-do":9155,"./es-do.js":9155,"./es-mx":9791,"./es-mx.js":9791,"./es-us":6098,"./es-us.js":6098,"./es.js":4805,"./et":6240,"./et.js":6240,"./eu":391,"./eu.js":391,"./fa":612,"./fa.js":612,"./fi":4220,"./fi.js":4220,"./fil":5570,"./fil.js":5570,"./fo":5466,"./fo.js":5466,"./fr":4461,"./fr-ca":6306,"./fr-ca.js":6306,"./fr-ch":7081,"./fr-ch.js":7081,"./fr.js":4461,"./fy":3484,"./fy.js":3484,"./ga":6957,"./ga.js":6957,"./gd":2978,"./gd.js":2978,"./gl":9866,"./gl.js":9866,"./gom-deva":5011,"./gom-deva.js":5011,"./gom-latn":4724,"./gom-latn.js":4724,"./gu":1601,"./gu.js":1601,"./he":9802,"./he.js":9802,"./hi":9358,"./hi.js":9358,"./hr":3907,"./hr.js":3907,"./hu":218,"./hu.js":218,"./hy-am":533,"./hy-am.js":533,"./id":2844,"./id.js":2844,"./is":7353,"./is.js":7353,"./it":6364,"./it-ch":774,"./it-ch.js":774,"./it.js":6364,"./ja":6008,"./ja.js":6008,"./jv":8221,"./jv.js":8221,"./ka":2417,"./ka.js":2417,"./kk":2071,"./kk.js":2071,"./km":6149,"./km.js":6149,"./kn":4572,"./kn.js":4572,"./ko":659,"./ko.js":659,"./ku":6285,"./ku-kmr":9398,"./ku-kmr.js":9398,"./ku.js":6285,"./ky":1609,"./ky.js":1609,"./lb":119,"./lb.js":119,"./lo":1748,"./lo.js":1748,"./lt":1973,"./lt.js":1973,"./lv":1347,"./lv.js":1347,"./me":3023,"./me.js":3023,"./mi":5747,"./mi.js":5747,"./mk":4341,"./mk.js":4341,"./ml":3840,"./ml.js":3840,"./mn":2058,"./mn.js":2058,"./mr":9182,"./mr.js":9182,"./ms":5197,"./ms-my":9136,"./ms-my.js":9136,"./ms.js":5197,"./mt":6408,"./mt.js":6408,"./my":1683,"./my.js":1683,"./nb":3141,"./nb.js":3141,"./ne":9344,"./ne.js":9344,"./nl":4703,"./nl-be":4641,"./nl-be.js":4641,"./nl.js":4703,"./nn":9873,"./nn.js":9873,"./oc-lnc":1217,"./oc-lnc.js":1217,"./pa-in":4612,"./pa-in.js":4612,"./pl":4457,"./pl.js":4457,"./pt":1089,"./pt-br":9146,"./pt-br.js":9146,"./pt.js":1089,"./ro":5950,"./ro.js":5950,"./ru":7292,"./ru.js":7292,"./sd":6774,"./sd.js":6774,"./se":7493,"./se.js":7493,"./si":3761,"./si.js":3761,"./sk":9711,"./sk.js":9711,"./sl":8558,"./sl.js":8558,"./sq":8633,"./sq.js":8633,"./sr":688,"./sr-cyrl":7903,"./sr-cyrl.js":7903,"./sr.js":688,"./ss":1991,"./ss.js":1991,"./sv":7020,"./sv.js":7020,"./sw":5891,"./sw.js":5891,"./ta":5714,"./ta.js":5714,"./te":206,"./te.js":206,"./tet":4768,"./tet.js":4768,"./tg":8276,"./tg.js":8276,"./th":7977,"./th.js":7977,"./tk":6928,"./tk.js":6928,"./tl-ph":8046,"./tl-ph.js":8046,"./tlh":1361,"./tlh.js":1361,"./tr":4367,"./tr.js":4367,"./tzl":627,"./tzl.js":627,"./tzm":2636,"./tzm-latn":8148,"./tzm-latn.js":8148,"./tzm.js":2636,"./ug-cn":8823,"./ug-cn.js":8823,"./uk":461,"./uk.js":461,"./ur":1366,"./ur.js":1366,"./uz":3454,"./uz-latn":8374,"./uz-latn.js":8374,"./uz.js":3454,"./vi":8572,"./vi.js":8572,"./x-pseudo":464,"./x-pseudo.js":464,"./yo":3709,"./yo.js":3709,"./zh-cn":5873,"./zh-cn.js":5873,"./zh-hk":7549,"./zh-hk.js":7549,"./zh-mo":2240,"./zh-mo.js":2240,"./zh-tw":405,"./zh-tw.js":405};function o(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=i,e.exports=o,o.id=5358},9915:function(e,t,a){"use strict";var s=a(5130),o=a(6768);const i={id:"app"};function n(e,t,a,n,r,l){const c=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.bF)(s.eB,{name:"page-fade",mode:"out-in"},{default:(0,o.k6)((()=>[(0,o.bF)(c)])),_:1})])}var r={name:"App"},l=a(1241);const c=(0,l.A)(r,[["render",n]]);var d=c,u=a(1387),h=a(4232);const p={class:"auth-container"},m={class:"signup-box"},g={key:0,class:"error-message"};function k(e,t,a,i,n,r){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",{class:(0,h.C4)(["weather-container",r.currentWeatherClass])},[(0,o.Lk)("div",p,[t[12]||(t[12]=(0,o.Lk)("h1",null,"iU Weather",-1)),(0,o.Lk)("nav",null,[(0,o.bF)(l,{to:"/"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)("Home")]))),_:1}),(0,o.bF)(l,{to:"/feature"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("Feature")]))),_:1}),(0,o.bF)(l,{to:"/faq"},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.eW)("FAQ?")]))),_:1})]),(0,o.Lk)("div",m,[t[11]||(t[11]=(0,o.Lk)("h2",null,"Signup",-1)),(0,o.Lk)("form",{onSubmit:t[4]||(t[4]=(0,s.D$)(((...e)=>r.signup&&r.signup(...e)),["prevent"]))},[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),type:"text",placeholder:"Username",required:""},null,512),[[s.Jo,n.username]]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e),type:"email",placeholder:"Email",required:""},null,512),[[s.Jo,n.email]]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.password1=e),type:"password",placeholder:"Password",required:""},null,512),[[s.Jo,n.password1]]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.password2=e),type:"password",placeholder:"Confirm Password",required:""},null,512),[[s.Jo,n.password2]]),t[8]||(t[8]=(0,o.Lk)("button",{type:"submit"},"Signup",-1))],32),(0,o.Lk)("p",null,[t[10]||(t[10]=(0,o.eW)("Already have an account? ")),(0,o.bF)(l,{to:"/login"},{default:(0,o.k6)((()=>t[9]||(t[9]=[(0,o.eW)("Login")]))),_:1})]),n.errorMessage?((0,o.uX)(),(0,o.CE)("p",g,(0,h.v_)(n.errorMessage),1)):(0,o.Q3)("",!0)])])],2)}a(4114);var f=a(4373),w={data(){return{username:"",email:"",password1:"",password2:"",errorMessage:""}},computed:{currentWeatherClass(){return"sunny"}},methods:{async signup(){try{let e=await f.A.post("http://127.0.0.1:8000/api/signup/",{username:this.username,email:this.email,password1:this.password1,password2:this.password2});console.log("Signup API response:",e.data),e.data.username?localStorage.setItem("username",e.data.username):console.warn("Username is missing from the API response"),localStorage.setItem("access_token",e.data.access_token),this.$router.push("/weather")}catch(e){this.errorMessage="Signup failed: "+JSON.stringify(e.response.data)}}}};const y=(0,l.A)(w,[["render",k],["__scopeId","data-v-a31da13e"]]);var v=y;const L={class:"auth-container"},_={class:"login-box"},b={key:0,class:"error-message"};function C(e,t,a,i,n,r){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",{class:(0,h.C4)(["weather-container",r.weatherClass])},[(0,o.Lk)("div",L,[t[10]||(t[10]=(0,o.Lk)("h1",null,"iU Weather",-1)),(0,o.Lk)("nav",null,[(0,o.bF)(l,{to:"/"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.eW)("Home")]))),_:1}),(0,o.bF)(l,{to:"/feature"},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.eW)("Feature")]))),_:1}),(0,o.bF)(l,{to:"/faq"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)("FAQ?")]))),_:1})]),(0,o.Lk)("div",_,[t[9]||(t[9]=(0,o.Lk)("h2",null,"Login",-1)),(0,o.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>r.login&&r.login(...e)),["prevent"]))},[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),type:"text",placeholder:"Username Or Email",required:""},null,512),[[s.Jo,n.username]]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),type:"password",placeholder:"Password",required:""},null,512),[[s.Jo,n.password]]),t[6]||(t[6]=(0,o.Lk)("button",{type:"submit"},"Login",-1))],32),(0,o.Lk)("p",null,[t[8]||(t[8]=(0,o.eW)("Don't have an account? ")),(0,o.bF)(l,{to:"/signup"},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.eW)("Sign Up Now")]))),_:1})]),n.errorMessage?((0,o.uX)(),(0,o.CE)("p",b,(0,h.v_)(n.errorMessage),1)):(0,o.Q3)("",!0)])])],2)}var j=a(144);const S=(0,j.Kh)({currentClass:"sunny",setCondition(e){e.includes("clear")?this.currentClass="sunny":e.includes("cloud")?this.currentClass="cloudy":e.includes("rain")||e.includes("drizzle")||e.includes("thunder")?this.currentClass="rainy":e.includes("snow")?this.currentClass="snowy":this.currentClass="default-bg"}});var F=S,P={data(){return{username:"",password:"",errorMessage:""}},computed:{weatherClass(){return F.currentClass||"sunny"}},methods:{async login(){try{let e=await f.A.post("http://127.0.0.1:8000/api/login/",{username:this.username,password:this.password});console.log("Full Login API Response:",e.data),console.log("Keys in response.data:",Object.keys(e.data)),e.data.user?localStorage.setItem("username",e.data.user):console.warn("Username field not found in API response"),localStorage.setItem("access_token",e.data.access_token),this.$router.push("/weather")}catch(e){this.errorMessage="Invalid credentials"}}}};const A=(0,l.A)(P,[["render",C],["__scopeId","data-v-5b84ea28"]]);var D=A;const W={class:"container"},V={class:"header"},x={key:0,class:"dropdown-menu"},E={class:"logout-option"},I={key:0,class:"logout-overlay"},$={class:"logout-popup"},z={class:"logout-buttons"},U={class:"header-left"},O={class:"weather-input"},M={class:"weather-data"},X={class:"weather-left"},N={class:"card"},T={class:"current-weather"},B={class:"details"},q={class:"weather-icon"},R=["src"],Q={class:"card-footer"},J={class:"card"},H={class:"day-forecast"},K={class:"icon-wrapper"},G=["src"],Y={class:"weather-right"},Z={class:"highlights"},ee={class:"card"},te={class:"card-head"},ae={class:"air-index aqi-1"},se={class:"air-indices"},oe={class:"item"},ie={class:"item"},ne={class:"item"},re={class:"item"},le={class:"item"},ce={class:"item"},de={class:"item"},ue={class:"item"},he={class:"card"},pe={class:"card-head"},me={class:"sunrise-sunset"},ge={class:"item"},ke={class:"item"},fe={class:"card"},we={class:"card-item"},ye={id:"humidityVal"},ve={class:"card"},Le={class:"card-item"},_e={id:"Pressureval"},be={class:"card"},Ce={class:"card-item"},je={id:"VisibilityVal"},Se={class:"card"},Fe={class:"card-item"},Pe={id:"windSpeedVal"},Ae={class:"card"},De={class:"card-item"},We={id:"feelsVal"},Ve={class:"hourly-forecast"},xe=["src"];function Ee(e,t,a,i,n,r){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",{class:(0,h.C4)(["weather-container",r.currentWeatherClass])},[(0,o.Lk)("div",W,[(0,o.Lk)("div",V,[(0,o.Lk)("div",{class:"menu-icon",onClick:t[0]||(t[0]=(...e)=>r.toggleDropDown&&r.toggleDropDown(...e))},t[11]||(t[11]=[(0,o.Lk)("i",{class:"fa-solid fa-bars"},null,-1)])),(0,o.bF)(s.eB,{name:"slide-fade"},{default:(0,o.k6)((()=>[n.isDropdownVisible?((0,o.uX)(),(0,o.CE)("div",x,[(0,o.Lk)("button",{class:"close-btn",onClick:t[1]||(t[1]=(...e)=>r.toggleDropDown&&r.toggleDropDown(...e))},"✖"),(0,o.Lk)("nav",null,[(0,o.bF)(l,{to:"/weather"},{default:(0,o.k6)((()=>t[12]||(t[12]=[(0,o.eW)("The Weather")]))),_:1})]),(0,o.Lk)("nav",null,[(0,o.bF)(l,{to:"/hobbies"},{default:(0,o.k6)((()=>t[13]||(t[13]=[(0,o.eW)("Hobbies")]))),_:1})]),(0,o.Lk)("nav",null,[(0,o.bF)(l,{to:"/preferences"},{default:(0,o.k6)((()=>t[14]||(t[14]=[(0,o.eW)("Saved Cities")]))),_:1})]),(0,o.Lk)("nav",E,[(0,o.bF)(l,{to:"#",onClick:(0,s.D$)(r.showLogoutPrompt,["prevent"])},{default:(0,o.k6)((()=>t[15]||(t[15]=[(0,o.eW)("Sign Out")]))),_:1},8,["onClick"])])])):(0,o.Q3)("",!0)])),_:1}),(0,o.bF)(s.eB,{name:"fade"},{default:(0,o.k6)((()=>[n.isLogoutPromptVisible?((0,o.uX)(),(0,o.CE)("div",I,[(0,o.Lk)("div",$,[t[16]||(t[16]=(0,o.Lk)("h3",null,"Are you sure you want to sign out?",-1)),(0,o.Lk)("div",z,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.confirmLogout&&r.confirmLogout(...e))},"Yes"),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.cancelLogout&&r.cancelLogout(...e))},"No")])])])):(0,o.Q3)("",!0)])),_:1}),(0,o.Lk)("div",U,[(0,o.Lk)("h2",null,"Welcome, "+(0,h.v_)(n.username)+"!",1)]),(0,o.Lk)("div",O,[(0,o.bo)((0,o.Lk)("input",{type:"text",name:"city",id:"city_input",placeholder:"Enter city name","onUpdate:modelValue":t[4]||(t[4]=e=>n.city=e)},null,512),[[s.Jo,n.city]]),(0,o.Lk)("button",{type:"button",id:"searchBtn",onClick:t[5]||(t[5]=(...e)=>r.fetchWeather&&r.fetchWeather(...e))},t[17]||(t[17]=[(0,o.Lk)("i",{class:"fa-regular fa-search"},null,-1),(0,o.eW)(" Search ")])),(0,o.Lk)("button",{type:"button",id:"locationBtn",onClick:t[6]||(t[6]=(...e)=>r.getUserCoordinates&&r.getUserCoordinates(...e))},t[18]||(t[18]=[(0,o.Lk)("i",{class:"bx bx-target-lock"},null,-1),(0,o.eW)(" Current Location ")])),(0,o.Lk)("button",{type:"button",id:"voiceBtn",onClick:t[7]||(t[7]=(...e)=>r.startVoiceRecognition&&r.startVoiceRecognition(...e))},t[19]||(t[19]=[(0,o.Lk)("i",{class:"fa-solid fa-microphone"},null,-1)]))])]),(0,o.Lk)("div",M,[(0,o.Lk)("div",X,[(0,o.Lk)("div",N,[(0,o.Lk)("div",T,[(0,o.Lk)("div",B,[t[20]||(t[20]=(0,o.Lk)("p",null,"Now",-1)),(0,o.Lk)("h2",null,(0,h.v_)(n.weather.temp)+"°C",1),(0,o.Lk)("p",null,(0,h.v_)(n.weather.description),1)]),(0,o.Lk)("div",q,[(0,o.Lk)("img",{src:n.weather.icon,alt:"Weather Icon"},null,8,R)]),(0,o.Lk)("button",{class:"speaker-button",onClick:t[8]||(t[8]=(...e)=>r.speakWeather&&r.speakWeather(...e))},t[21]||(t[21]=[(0,o.Lk)("i",{class:"fa-solid fa-volume-up"},null,-1)])),t[24]||(t[24]=(0,o.Lk)("hr",null,null,-1)),(0,o.Lk)("div",Q,[(0,o.Lk)("p",null,[t[22]||(t[22]=(0,o.Lk)("i",{class:"fa-light fa-calendar"},null,-1)),(0,o.eW)((0,h.v_)(n.weather.date),1)]),(0,o.Lk)("p",null,[t[23]||(t[23]=(0,o.Lk)("i",{class:"fa-light fa-location-dot"},null,-1)),(0,o.eW)((0,h.v_)(n.weather.city)+", "+(0,h.v_)(n.weather.country),1)])])])]),(0,o.Lk)("div",J,[t[26]||(t[26]=(0,o.Lk)("h2",null,"5 Days Forecast",-1)),(0,o.Lk)("button",{class:"speaker-button",onClick:t[9]||(t[9]=(...e)=>r.speakAverageForecast&&r.speakAverageForecast(...e))},t[25]||(t[25]=[(0,o.Lk)("i",{class:"fa-solid fa-volume-up"},null,-1)])),(0,o.Lk)("div",H,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.forecast,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"forecast-item",key:t},[(0,o.Lk)("div",K,[(0,o.Lk)("img",{src:e.icon,alt:"Weather Icon"},null,8,G),(0,o.Lk)("span",null,(0,h.v_)(e.temp)+"°C",1)]),(0,o.Lk)("p",null,(0,h.v_)(e.date),1),(0,o.Lk)("p",null,(0,h.v_)(e.day),1)])))),128))])])]),(0,o.Lk)("div",Y,[t[53]||(t[53]=(0,o.Lk)("h2",null,"Today's Highlights",-1)),(0,o.Lk)("div",Z,[(0,o.Lk)("div",ee,[(0,o.Lk)("div",te,[t[27]||(t[27]=(0,o.Lk)("p",null,"Air Quality Index",-1)),(0,o.Lk)("p",ae,(0,h.v_)(n.weather.airQuality),1)]),(0,o.Lk)("div",se,[t[36]||(t[36]=(0,o.Lk)("i",{class:"fa-regular fa-wind fa-3x"},null,-1)),(0,o.Lk)("div",oe,[t[28]||(t[28]=(0,o.Lk)("p",null,"PM2.5",-1)),(0,o.Lk)("h2",null,(0,h.v_)(n.weather.pm2_5),1)]),(0,o.Lk)("div",ie,[t[29]||(t[29]=(0,o.Lk)("p",null,"PM10",-1)),(0,o.Lk)("h2",null,(0,h.v_)(n.weather.pm10),1)]),(0,o.Lk)("div",ne,[t[30]||(t[30]=(0,o.Lk)("p",null,"SO2",-1)),(0,o.Lk)("h2",null,(0,h.v_)(n.weather.so2),1)]),(0,o.Lk)("div",re,[t[31]||(t[31]=(0,o.Lk)("p",null,"CO",-1)),(0,o.Lk)("h2",null,(0,h.v_)(n.weather.co),1)]),(0,o.Lk)("div",le,[t[32]||(t[32]=(0,o.Lk)("p",null,"NO",-1)),(0,o.Lk)("h2",null,(0,h.v_)(n.weather.no),1)]),(0,o.Lk)("div",ce,[t[33]||(t[33]=(0,o.Lk)("p",null,"NO2",-1)),(0,o.Lk)("h2",null,(0,h.v_)(n.weather.no2),1)]),(0,o.Lk)("div",de,[t[34]||(t[34]=(0,o.Lk)("p",null,"NH3",-1)),(0,o.Lk)("h2",null,(0,h.v_)(n.weather.nh3),1)]),(0,o.Lk)("div",ue,[t[35]||(t[35]=(0,o.Lk)("p",null,"O3",-1)),(0,o.Lk)("h2",null,(0,h.v_)(n.weather.o3),1)])])]),(0,o.Lk)("div",he,[(0,o.Lk)("div",pe,[t[38]||(t[38]=(0,o.Lk)("p",null,"Sunrise & Sunset",-1)),(0,o.Lk)("button",{class:"speaker-button",onClick:t[10]||(t[10]=(...e)=>r.speakSunriseSunset&&r.speakSunriseSunset(...e))},t[37]||(t[37]=[(0,o.Lk)("i",{class:"fa-solid fa-volume-up"},null,-1)]))]),(0,o.Lk)("div",me,[(0,o.Lk)("div",ge,[t[40]||(t[40]=(0,o.Lk)("div",{class:"icon"},[(0,o.Lk)("i",{class:"fa-light fa-sunrise fa-4x"})],-1)),(0,o.Lk)("div",null,[t[39]||(t[39]=(0,o.Lk)("p",null,"Sunrise",-1)),(0,o.Lk)("h2",null,(0,h.v_)(n.weather.sunrise),1)])]),(0,o.Lk)("div",ke,[t[42]||(t[42]=(0,o.Lk)("div",{class:"icon"},[(0,o.Lk)("i",{class:"fa-light fa-sunset fa-4x"})],-1)),(0,o.Lk)("div",null,[t[41]||(t[41]=(0,o.Lk)("p",null,"Sunset",-1)),(0,o.Lk)("h2",null,(0,h.v_)(n.weather.sunset),1)])])])]),(0,o.Lk)("div",fe,[t[44]||(t[44]=(0,o.Lk)("div",{class:"card-head"},[(0,o.Lk)("p",null,"Humidity")],-1)),(0,o.Lk)("div",we,[t[43]||(t[43]=(0,o.Lk)("i",{class:"fa-light fa-droplet fa-2x"},null,-1)),(0,o.Lk)("h2",ye,(0,h.v_)(n.weather.humidity)+"%",1)])]),(0,o.Lk)("div",ve,[t[46]||(t[46]=(0,o.Lk)("div",{class:"card-head"},[(0,o.Lk)("p",null,"Pressure")],-1)),(0,o.Lk)("div",Le,[t[45]||(t[45]=(0,o.Lk)("i",{class:"fa-light fa-compass fa-2x"},null,-1)),(0,o.Lk)("h2",_e,(0,h.v_)(n.weather.pressure)+" hPa",1)])]),(0,o.Lk)("div",be,[t[48]||(t[48]=(0,o.Lk)("div",{class:"card-head"},[(0,o.Lk)("p",null,"Visibility")],-1)),(0,o.Lk)("div",Ce,[t[47]||(t[47]=(0,o.Lk)("i",{class:"fa-light fa-eye fa-2x"},null,-1)),(0,o.Lk)("h2",je,(0,h.v_)(n.weather.visibility)+" km",1)])]),(0,o.Lk)("div",Se,[t[50]||(t[50]=(0,o.Lk)("div",{class:"card-head"},[(0,o.Lk)("p",null,"Wind Speed")],-1)),(0,o.Lk)("div",Fe,[t[49]||(t[49]=(0,o.Lk)("i",{class:"fa-light fa-location-arrow fa-2x"},null,-1)),(0,o.Lk)("h2",Pe,(0,h.v_)(n.weather.windSpeed)+" m/s",1)])]),(0,o.Lk)("div",Ae,[t[52]||(t[52]=(0,o.Lk)("div",{class:"card-head"},[(0,o.Lk)("p",null,"Feels Like")],-1)),(0,o.Lk)("div",De,[t[51]||(t[51]=(0,o.Lk)("i",{class:"fa-light fa-temperature-list fa-2x"},null,-1)),(0,o.Lk)("h2",We,(0,h.v_)(n.weather.feelsLike)+"°C",1)])])]),t[54]||(t[54]=(0,o.Lk)("h2",null,"Today at",-1)),(0,o.Lk)("div",Ve,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.hourlyForecast,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"card",key:t},[(0,o.Lk)("p",null,(0,h.v_)(e.time),1),(0,o.Lk)("img",{src:e.icon,alt:"Weather Icon"},null,8,xe),(0,o.Lk)("p",null,(0,h.v_)(e.temp)+"°C",1)])))),128))])])])])],2)}a(8111),a(2489),a(1701);var Ie=a(9148),$e=a.n(Ie),ze={data(){return{isDropdownVisible:!1,isLogoutPromptVisible:!1,username:"",city:"London",weather:{temp:"___",description:"_____",icon:"https://openweathermap.org/img/wn/04d@2x.png",date:$e()().format("dddd, MMM DD"),city:"_________",country:"_________",airQuality:"Good",sunrise:"____",sunset:"____",humidity:"____",pressure:"____",visibility:"____",windSpeed:"____",feelsLike:"____",pm2_5:"____",pm10:"____",so2:"____",co:"____",no:"____",no2:"____",nh3:"____",o3:"____"},forecast:Array(5).fill({icon:"https://openweathermap.org/img/wn/02d.png",temp:"____",date:"_______",day:"_______"}),hourlyForecast:Array(8).fill({time:"9 AM",icon:"https://openweathermap.org/img/wn/04d.png",temp:"____"}),recognition:null}},computed:{currentWeatherClass(){return F.currentClass}},methods:{async fetchWeather(){try{const e=await f.A.get(`https://api.openweathermap.org/geo/1.0/direct?q=${this.city}&limit=1&appid=69ce9849eb65509427ae460da399e041`);if(!e.data.length)throw new Error("City not found");const{lat:t,lon:a,name:s,country:o}=e.data[0],i=await f.A.get(`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${a}&appid=69ce9849eb65509427ae460da399e041`),n=i.data,r=await f.A.get(`https://api.openweathermap.org/data/2.5/air_pollution?lat=${t}&lon=${a}&appid=69ce9849eb65509427ae460da399e041`),l=r.data.list[0].components,c=await f.A.get(`https://api.openweathermap.org/data/2.5/forecast?lat=${t}&lon=${a}&appid=69ce9849eb65509427ae460da399e041`),d=c.data.list;this.weather={temp:(n.main.temp-273.15).toFixed(2),description:n.weather[0].description,condition:n.weather[0].main.toLowerCase(),icon:`https://openweathermap.org/img/wn/${n.weather[0].icon}@2x.png`,date:$e()().format("dddd, MMM DD"),city:s,country:o,airQuality:"Good",sunrise:$e().unix(n.sys.sunrise).format("hh:mm A"),sunset:$e().unix(n.sys.sunset).format("hh:mm A"),humidity:n.main.humidity,pressure:n.main.pressure,visibility:(n.visibility/1e3).toFixed(1),windSpeed:n.wind.speed,feelsLike:(n.main.feels_like-273.15).toFixed(2),pm2_5:l.pm2_5,pm10:l.pm10,so2:l.so2,co:l.co,no:l.no,no2:l.no2,nh3:l.nh3,o3:l.o3},F.setCondition(this.weather.condition),localStorage.setItem("weatherData",JSON.stringify({temp:this.weather.temp,city:this.weather.city,description:this.weather.description})),this.forecast=d.filter(((e,t)=>t%8===0)).slice(0,5).map((e=>({icon:`https://openweathermap.org/img/wn/${e.weather[0].icon}.png`,temp:(e.main.temp-273.15).toFixed(2),date:$e()(e.dt_txt).format("DD MMM"),day:$e()(e.dt_txt).format("dddd")}))),this.hourlyForecast=d.slice(0,8).map((e=>({time:$e()(e.dt_txt).format("h A"),icon:`https://openweathermap.org/img/wn/${e.weather[0].icon}.png`,temp:(e.main.temp-273.15).toFixed(2)})))}catch(e){console.error("Error fetching weather data:",e),alert("Failed to fetch weather data")}},speakWeather(){if(!this.weather.temp||!this.weather.city)return void alert("Weather data not available for speech output.");const e=`The weather is ${this.weather.temp} degrees Celsius in ${this.weather.city}.`,t=new SpeechSynthesisUtterance(e);t.lang="en-US",t.rate=1,t.volume=1,window.speechSynthesis.speak(t)},speakSunriseSunset(){if(!this.weather.sunrise||!this.weather.sunset)return void alert("Sunrise and sunset data not available for speech output.");const e=`The sunrise today is at ${this.weather.sunrise}, and the sunset is at ${this.weather.sunset}.`,t=new SpeechSynthesisUtterance(e);t.lang="en-US",t.rate=1,t.volume=1,window.speechSynthesis.speak(t)},speakAverageForecast(){if(!this.forecast||this.forecast.length<5)alert("Not enough forecast data available.");else try{const e=parseFloat(this.forecast[0]?.temp||0),t=parseFloat(this.forecast[1]?.temp||0),a=parseFloat(this.forecast[2]?.temp||0),s=parseFloat(this.forecast[3]?.temp||0),o=parseFloat(this.forecast[4]?.temp||0),i=e+t+a+s+o,n=(i/5).toFixed(2),r=`The average weather over the next 5 days is ${n} degrees Celsius.`,l=new SpeechSynthesisUtterance(r);l.lang="en-US",l.rate=1,l.volume=1,window.speechSynthesis.speak(l)}catch(e){console.error("Error calculating average temperature:",e),alert("An error occurred while calculating the average temperature.")}},async getUserCoordinates(){try{const e=await new Promise(((e,t)=>{navigator.geolocation.getCurrentPosition(e,t)})),{latitude:t,longitude:a}=e.coords,s=await f.A.get(`https://api.openweathermap.org/geo/1.0/reverse?lat=${t}&lon=${a}&limit=1&appid=69ce9849eb65509427ae460da399e041`),{name:o}=s.data[0];this.city=o,this.fetchWeather()}catch(e){console.error("Error fetching user coordinates:",e),alert("Failed to fetch user location")}},toggleDropDown(){this.isDropdownVisible=!this.isDropdownVisible,console.log("Dropdown toggled:",this.isDropdownVisible)},showLogoutPrompt(){this.isLogoutPromptVisible=!0},cancelLogout(){this.isLogoutPromptVisible=!1},confirmLogout(){localStorage.removeItem("access_token"),this.isLogoutPromptVisible=!1,this.$router.push("/login")},getUserInfo(){this.username=localStorage.getItem("username")||"Guest"},startVoiceRecognition(){const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return void alert("Your browser does not support speech recognition.");this.recognition=new e,this.recognition.lang="en-US",this.recognition.interimResults=!1,this.recognition.maxAlternatives=1,this.recognition.continuous=!1;const t=e=>new Promise((t=>{const a=new SpeechSynthesisUtterance(e);a.lang="en-US",a.rate=1,a.volume=1,a.onend=t,window.speechSynthesis.speak(a)})),a=async(e="not_found")=>{const a={not_found:"I couldn't find that city. Please try saying a valid city name again.",no_speech:"I didn't hear anything. Please say the name of a city.",default:"Sorry, I didn't understand. Please try again.",invalid_city:"That city doesn't exist in our database. Please try a different city name."},s=a[e]||a.default;await t(s),this.startVoiceRecognition()};this.recognition.onresult=async e=>{if(!e.results||!e.results[0])return void await a("no_speech");const s=e.results[0][0].transcript.trim();if(s){this.city=s;try{const e=await f.A.get(`https://api.openweathermap.org/geo/1.0/direct?q=${this.city}&limit=1&appid=69ce9849eb65509427ae460da399e041`);if(!e.data.length)return void await a("invalid_city");await this.fetchWeather(),await t(`Showing weather for ${this.weather.city}`)}catch(o){console.error("Error:",o),await a("not_found")}}else await a("no_speech")},this.recognition.onerror=async e=>{console.error("Speech recognition error:",e.error);const t={"no-speech":"no_speech","audio-capture":"no_speech","not-allowed":"no_speech"};await a(t[e.error]||"default")},this.recognition.start()}},mounted(){this.getUserInfo(),this.fetchWeather()}};const Ue=(0,l.A)(ze,[["render",Ee]]);var Oe=Ue;const Me={class:"contained"},Xe={class:"header"},Ne={key:0,class:"dropdown-menu"},Te={class:"logout-option"},Be={key:0,class:"logout-overlay"},qe={class:"logout-popup"},Re={class:"logout-buttons"},Qe={class:"page-title"},Je={class:"hobbies-container"},He=["href"];function Ke(e,t,a,i,n,r){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",{class:(0,h.C4)(["weather-container",r.currentWeatherClass])},[(0,o.Lk)("div",Me,[(0,o.Lk)("div",Xe,[n.isDropdownVisible?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",{key:0,class:"menu-icon",onClick:t[0]||(t[0]=(...e)=>r.toggleDropDown&&r.toggleDropDown(...e))},t[4]||(t[4]=[(0,o.Lk)("i",{class:"fa-solid fa-bars"},null,-1)]))),(0,o.bF)(s.eB,{name:"slide-fade"},{default:(0,o.k6)((()=>[n.isDropdownVisible?((0,o.uX)(),(0,o.CE)("div",Ne,[(0,o.Lk)("button",{class:"close-btn",onClick:t[1]||(t[1]=(...e)=>r.toggleDropDown&&r.toggleDropDown(...e))},"✖"),(0,o.Lk)("nav",null,[(0,o.bF)(l,{to:"/weather"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)("The Weather")]))),_:1})]),(0,o.Lk)("nav",null,[(0,o.bF)(l,{to:"/hobbies"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("Hobbies")]))),_:1})]),(0,o.Lk)("nav",null,[(0,o.bF)(l,{to:"/preferences"},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.eW)("Saved Cities")]))),_:1})]),(0,o.Lk)("nav",Te,[(0,o.bF)(l,{to:"#",onClick:(0,s.D$)(r.showLogoutPrompt,["prevent"])},{default:(0,o.k6)((()=>t[8]||(t[8]=[(0,o.eW)("Sign Out")]))),_:1},8,["onClick"])])])):(0,o.Q3)("",!0)])),_:1}),(0,o.bF)(s.eB,{name:"fade"},{default:(0,o.k6)((()=>[n.isLogoutPromptVisible?((0,o.uX)(),(0,o.CE)("div",Be,[(0,o.Lk)("div",qe,[t[9]||(t[9]=(0,o.Lk)("h3",null,"Are you sure you want to sign out?",-1)),(0,o.Lk)("div",Re,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.confirmLogout&&r.confirmLogout(...e))},"Yes"),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.cancelLogout&&r.cancelLogout(...e))},"No")])])])):(0,o.Q3)("",!0)])),_:1}),t[10]||(t[10]=(0,o.Lk)("div",{class:"header-left"},null,-1))]),(0,o.Lk)("h2",Qe,"Hobbies for "+(0,h.v_)(n.city),1),(0,o.Lk)("div",Je,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.hobbies,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"card",key:t},[(0,o.Lk)("h3",null,(0,h.v_)(e.name),1),(0,o.Lk)("p",null,(0,h.v_)(e.description),1),(0,o.Lk)("a",{href:e.link,target:"_blank",class:"learn-more"},"Learn More",8,He)])))),128))])])],2)}var Ge={data(){return{isDropdownVisible:!1,isLogoutPromptVisible:!1,username:"",city:"Unknown",temperature:null,hobbies:[]}},computed:{currentWeatherClass(){const e=localStorage.getItem("weatherData");if(e)try{const t=JSON.parse(e).description?.toLowerCase()||"";if(t.includes("clear"))return"sunny";if(t.includes("cloud"))return"cloudy";if(t.includes("rain")||t.includes("drizzle")||t.includes("thunder"))return"rainy";if(t.includes("snow"))return"snowy"}catch(t){console.error("Failed to parse condition from weatherData:",t)}return"sunny"}},methods:{toggleDropDown(){this.isDropdownVisible=!this.isDropdownVisible},showLogoutPrompt(){this.isLogoutPromptVisible=!0},cancelLogout(){this.isLogoutPromptVisible=!1},confirmLogout(){localStorage.removeItem("access_token"),this.isLogoutPromptVisible=!1,this.$router.push("/login")},getUserInfo(){this.username=localStorage.getItem("username")||"Guest"},getTemperature(){const e=localStorage.getItem("weatherData");if(e)try{const t=JSON.parse(e);t.temp&&(this.temperature=parseFloat(t.temp))}catch(t){console.error("Error parsing weatherData:",t)}},getCity(){const e=localStorage.getItem("weatherData");if(e)try{const t=JSON.parse(e);t.city&&(this.city=t.city,this.fetchHobbies())}catch(t){console.error("Error parsing weatherData:",t)}},fetchHobbies(){const e={cold:[{name:"Knitting",description:"Create warm clothes for the season."},{name:"Baking",description:"Warm up by baking some treats."},{name:"Reading",description:"Cozy up with a good book by the fireplace."},{name:"Puzzle Solving",description:"Engage in challenging puzzles and brain teasers."}],cool:[{name:"Hiking",description:"Enjoy the fresh air with a scenic hike."},{name:"Photography",description:"Capture stunning landscapes."},{name:"Fishing",description:"Relax by the water and catch some fish."},{name:"Birdwatching",description:"Observe and identify birds in nature."}],moderate:[{name:"Cycling",description:"Perfect weather for a bike ride."},{name:"Yoga",description:"Practice yoga in the fresh air."},{name:"Gardening",description:"Grow your own flowers or vegetables."},{name:"Outdoor Picnics",description:"Enjoy a meal outside with friends or family."}],warm:[{name:"Swimming",description:"Cool off by going for a swim."},{name:"Outdoor Sports",description:"Great time for tennis, football, or basketball."},{name:"Camping",description:"Spend a night under the stars."},{name:"Kayaking",description:"Paddle through rivers or lakes."}],hot:[{name:"Beach Day",description:"Enjoy the sun at the beach."},{name:"Smoothie Making",description:"Stay refreshed with a homemade smoothie."},{name:"Ice Skating (Indoor)",description:"Cool down while skating indoors."},{name:"Water Balloon Fights",description:"Have fun with friends and family while cooling off."}]};let t="moderate";null!==this.temperature&&(t=this.temperature<5?"cold":this.temperature>=5&&this.temperature<15?"cool":this.temperature>=15&&this.temperature<25?"moderate":this.temperature>=25&&this.temperature<35?"warm":"hot"),this.hobbies=(e[t]||[]).map((e=>({...e,link:`https://www.google.com/search?q=${encodeURIComponent(e.name+" in "+this.city)}`})))}},mounted(){this.getUserInfo(),this.getTemperature(),this.getCity()}};const Ye=(0,l.A)(Ge,[["render",Ke],["__scopeId","data-v-35a76fe2"]]);var Ze=Ye;const et={class:"contained"},tt={class:"header"},at={key:0,class:"dropdown-menu"},st={class:"logout-option"},ot={key:0,class:"logout-overlay"},it={class:"logout-popup"},nt={class:"logout-buttons"},rt={key:0,class:"add-city-overlay"},lt={class:"add-city-popup"},ct={class:"add-city-buttons"},dt={class:"add-city"},ut={class:"saved-cities"},ht=["onClick"],pt=["onClick"],mt={key:0},gt=["src"];function kt(e,t,a,i,n,r){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",{class:(0,h.C4)(["weather-container",r.currentWeatherClass])},[(0,o.Lk)("div",et,[(0,o.Lk)("div",tt,[(0,o.Lk)("div",{class:"menu-icon",onClick:t[0]||(t[0]=(...e)=>r.toggleDropdown&&r.toggleDropdown(...e))},t[9]||(t[9]=[(0,o.Lk)("i",{class:"fa-solid fa-bars"},null,-1)])),(0,o.bF)(s.eB,{name:"slide-fade"},{default:(0,o.k6)((()=>[n.isDropdownVisible?((0,o.uX)(),(0,o.CE)("div",at,[(0,o.Lk)("button",{class:"close-btn",onClick:t[1]||(t[1]=(...e)=>r.toggleDropdown&&r.toggleDropdown(...e))},"✖"),(0,o.Lk)("nav",null,[(0,o.bF)(l,{to:"/weather"},{default:(0,o.k6)((()=>t[10]||(t[10]=[(0,o.eW)("The Weather")]))),_:1})]),(0,o.Lk)("nav",null,[(0,o.bF)(l,{to:"/hobbies"},{default:(0,o.k6)((()=>t[11]||(t[11]=[(0,o.eW)("Hobbies")]))),_:1})]),(0,o.Lk)("nav",null,[(0,o.bF)(l,{to:"/preferences"},{default:(0,o.k6)((()=>t[12]||(t[12]=[(0,o.eW)("Saved Cities")]))),_:1})]),(0,o.Lk)("nav",st,[(0,o.bF)(l,{to:"#",onClick:(0,s.D$)(r.showLogoutPrompt,["prevent"])},{default:(0,o.k6)((()=>t[13]||(t[13]=[(0,o.eW)("Sign Out")]))),_:1},8,["onClick"])])])):(0,o.Q3)("",!0)])),_:1}),(0,o.bF)(s.eB,{name:"fade"},{default:(0,o.k6)((()=>[n.isLogoutPromptVisible?((0,o.uX)(),(0,o.CE)("div",ot,[(0,o.Lk)("div",it,[t[14]||(t[14]=(0,o.Lk)("h3",null,"Are you sure you want to sign out?",-1)),(0,o.Lk)("div",nt,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.confirmLogout&&r.confirmLogout(...e))},"Yes"),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.cancelLogout&&r.cancelLogout(...e))},"No")])])])):(0,o.Q3)("",!0)])),_:1}),(0,o.bF)(s.eB,{name:"fade"},{default:(0,o.k6)((()=>[n.isAddCityPromptVisible?((0,o.uX)(),(0,o.CE)("div",rt,[(0,o.Lk)("div",lt,[(0,o.Lk)("h3",null,"Are you sure you want to add "+(0,h.v_)(n.newCity)+"?",1),(0,o.Lk)("div",ct,[(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>r.confirmAddCity&&r.confirmAddCity(...e))},"Yes"),(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>r.cancelAddCity&&r.cancelAddCity(...e))},"No")])])])):(0,o.Q3)("",!0)])),_:1})]),t[16]||(t[16]=(0,o.Lk)("h2",null,"Saved Cities",-1)),(0,o.Lk)("div",dt,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>n.newCity=e),placeholder:"Enter city name"},null,512),[[s.Jo,n.newCity]]),(0,o.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>r.saveCity&&r.saveCity(...e))},"Save City"),(0,o.Lk)("button",{type:"button",id:"voiceBtn",onClick:t[8]||(t[8]=(...e)=>r.startVoiceRecognition&&r.startVoiceRecognition(...e))},t[15]||(t[15]=[(0,o.Lk)("i",{class:"fa-solid fa-microphone"},null,-1)]))]),(0,o.Lk)("div",ut,[(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.savedCities,((e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.Lk)("button",{onClick:t=>r.fetchWeather(e.city_name)},(0,h.v_)(e.city_name)+" - "+(0,h.v_)(e.temp)+"°C ",9,ht),(0,o.Lk)("button",{onClick:t=>r.removeCity(e.city_name)},"✖",8,pt)])))),128))])]),n.weather?((0,o.uX)(),(0,o.CE)("div",mt,[(0,o.Lk)("h3",null,(0,h.v_)(n.weather.city)+", "+(0,h.v_)(n.weather.country),1),(0,o.Lk)("p",null,(0,h.v_)(n.weather.temp)+"°C - "+(0,h.v_)(n.weather.description),1),(0,o.Lk)("img",{src:n.weather.icon,alt:"Weather Icon"},null,8,gt)])):(0,o.Q3)("",!0)])],2)}var ft={data(){return{newCity:"",isAddCityPromptVisible:!1,savedCities:[],weather:null,isDropdownVisible:!1,isLogoutPromptVisible:!1}},computed:{currentWeatherClass(){const e=localStorage.getItem("weatherData");if(e)try{const t=JSON.parse(e).description?.toLowerCase()||"";if(t.includes("clear"))return"sunny";if(t.includes("cloud"))return"cloudy";if(t.includes("rain")||t.includes("drizzle")||t.includes("thunder"))return"rainy";if(t.includes("snow"))return"snowy"}catch(t){console.error("Error reading weather description from localStorage:",t)}return"sunny"}},methods:{toggleDropdown(){this.isDropdownVisible=!this.isDropdownVisible},showLogoutPrompt(){this.isLogoutPromptVisible=!0},speak(e){return new Promise((t=>{const a=new SpeechSynthesisUtterance(e);a.lang="en-US",a.rate=1,a.volume=1,a.onend=t,window.speechSynthesis.speak(a)}))},startVoiceRecognition(){const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return void alert("Your browser does not support speech recognition.");this.recognition=new e,this.recognition.lang="en-US",this.recognition.interimResults=!1,this.recognition.maxAlternatives=1,this.recognition.continuous=!1;const t=async(e="not_found")=>{const t={not_found:"I couldn't find weather data for that city. Please try again.",no_speech:"I didn't hear anything. Please say the name of a city.",default:"Sorry, I didn't understand. Please try again.",invalid_city:"That city doesn't exist in our database. Please try a different city name."},a=t[e]||t.default;await this.speak(a),this.startVoiceRecognition()};this.recognition.onresult=async e=>{if(!e.results||!e.results[0])return void await t("no_speech");const a=e.results[0][0].transcript.trim();if(a){this.newCity=a;try{const e=await f.A.get(`https://api.openweathermap.org/geo/1.0/direct?q=${this.newCity}&limit=1&appid=69ce9849eb65509427ae460da399e041`);if(!e.data.length)return void await t("invalid_city");await this.speak(`Found ${this.newCity}. Would you like to save this city?`),this.isAddCityPromptVisible=!0}catch(s){console.error("Error:",s),await t("not_found")}}else await t("no_speech")},this.recognition.onerror=async e=>{console.error("Speech recognition error:",e.error);const a={"no-speech":"no_speech","audio-capture":"no_speech","not-allowed":"no_speech"};await t(a[e.error]||"default")},this.recognition.start()},async confirmAddCity(){this.isAddCityPromptVisible=!1;try{await this.saveCity(),await this.speak(`Successfully saved ${this.newCity}`)}catch(e){await this.speak("Failed to save city. Please try again."),console.error("Save error:",e)}},cancelAddCity(){this.isAddCityPromptVisible=!1,this.newCity=""},cancelLogout(){this.isLogoutPromptVisible=!1},confirmLogout(){localStorage.removeItem("access_token"),this.isLogoutPromptVisible=!1,this.$router.push("/login")},async refreshToken(){const e=localStorage.getItem("refresh_token");if(!e)return console.error("No refresh token found. Please log in again."),void alert("Session expired. Please log in again.");try{const t=await f.A.post("http://127.0.0.1:8000/api/token/refresh/",{refresh:e});localStorage.setItem("access_token",t.data.access),console.log("Token refreshed successfully.")}catch(t){console.error("Error refreshing token:",t),alert("Failed to refresh token. Please log in again.")}},async fetchSavedCities(){const e=localStorage.getItem("access_token");if(!e)return console.error("No authentication token found. Please login."),void alert("Session expired. Please login again.");try{const t=await f.A.get("http://127.0.0.1:8000/api/saved-cities/",{headers:{Authorization:`Bearer ${e}`}});this.savedCities=t.data}catch(t){t.response&&401===t.response.status?(await this.refreshToken(),await this.fetchSavedCities()):(console.error("Error fetching saved cities:",t),alert("Failed to fetch saved cities. Please try again."))}},async saveCity(){if(!this.newCity.trim())return alert("Enter a valid city name.");const e=localStorage.getItem("access_token");if(!e)return console.error("No authentication token found. Please log in."),void alert("Session expired. Please log in again.");try{const t=await f.A.get(`https://api.openweathermap.org/geo/1.0/direct?q=${this.newCity}&limit=1&appid=69ce9849eb65509427ae460da399e041`);if(!t.data.length)throw new Error("City not found");const{lat:a,lon:s}=t.data[0],o=await f.A.get(`https://api.openweathermap.org/data/2.5/weather?lat=${a}&lon=${s}&appid=69ce9849eb65509427ae460da399e041`),i=o.data,n={city_name:this.newCity,temp:(i.main.temp-273.15).toFixed(2),description:i.weather[0].description,icon:`https://openweathermap.org/img/wn/${i.weather[0].icon}@2x.png`};console.log("Saving city with data:",n);const r=await f.A.post("http://127.0.0.1:8000/api/save-city/",n,{headers:{Authorization:`Bearer ${e}`}});console.log("Backend response:",r.data),this.newCity="",await this.fetchSavedCities()}catch(t){t.response&&401===t.response.status?(await this.refreshToken(),await this.saveCity()):(console.error("Error saving city:",t.response?t.response.data:t),alert("Failed to save city. Please try again."))}},async removeCity(e){const t=localStorage.getItem("access_token");if(!t)return console.error("No authentication token found. Please log in."),void alert("Session expired. Please log in again.");try{await f.A.delete(`http://127.0.0.1:8000/api/remove-city/${e}/`,{headers:{Authorization:`Bearer ${t}`}}),await this.fetchSavedCities()}catch(a){a.response&&401===a.response.status?(await this.refreshToken(),await this.removeCity(e)):(console.error("Error removing city:",a),alert("Failed to remove city."))}},async fetchWeather(e){try{const t=await f.A.get(`https://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=1&appid=69ce9849eb65509427ae460da399e041`),{lat:a,lon:s,name:o,country:i}=t.data[0],n=await f.A.get(`https://api.openweathermap.org/data/2.5/weather?lat=${a}&lon=${s}&appid=69ce9849eb65509427ae460da399e041`),r=n.data;this.weather={city:o,country:i,temp:(r.main.temp-273.15).toFixed(2),description:r.weather[0].description,icon:`https://openweathermap.org/img/wn/${r.weather[0].icon}@2x.png`}}catch(t){console.error("Error fetching weather data:",t),alert("Failed to fetch weather data.")}}},async mounted(){await this.fetchSavedCities(),this.savedCities.length>0&&this.fetchWeather(this.savedCities[0].city_name)}};const wt=(0,l.A)(ft,[["render",kt],["__scopeId","data-v-4962a554"]]);var yt=wt;const vt=[{path:"/signup",component:v},{path:"/login",component:D},{path:"/hobbies",component:Ze},{path:"/preferences",component:yt},{path:"/weather",component:Oe,meta:{requiresAuth:!0}},{path:"/",redirect:"/login"}],Lt=(0,u.aE)({history:(0,u.LA)(),routes:vt});Lt.beforeEach(((e,t,a)=>{const s=!!localStorage.getItem("access_token");e.meta.requiresAuth&&!s?a("/login"):a()}));var _t=Lt;const bt=(0,s.Ef)(d);bt.use(_t),bt.mount("#app")}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){var e=[];a.O=function(t,s,o,i){if(!s){var n=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],i=e[d][2];for(var r=!0,l=0;l<s.length;l++)(!1&i||n>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(r=!1,i<n&&(n=i));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,o,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,i,n=s[0],r=s[1],l=s[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(l)var d=l(a)}for(t&&t(s);c<n.length;c++)i=n[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},s=self["webpackChunkweather_frontend"]=self["webpackChunkweather_frontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(9915)}));s=a.O(s)})();
//# sourceMappingURL=app.bceb067d.js.map